{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>
        Github - Octa Profile
    </title>
    <style>
          .vertical-center {
            min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
            min-height: 100vh; /* These two lines are counted as one :-)       */
          
            display: flex;
            align-items: center;
          };
          .avatar{
              border-radius: 50%; border-color: dodgerblue; border-width: 4px; width:200px;
            }
    </style>
    <script>
      function repository_filter(element){
        let clicked_id = element.id;    // ID of clicked button
        let toggle_id = clicked_id.slice(0, (clicked_id.length - 4));   // ID of toggled item associated with clicked button

        // Fetching class of toggled item associated with  this element
        toggle_id_class = document.getElementById(toggle_id).className

        // changing color of clicked button depending on wheather item associated with this clicked button is collapsed or not
        if(toggle_id_class == "collapse show"){
          document.getElementById(clicked_id).className = "btn btn-outline-dark";
        }
        else {
          document.getElementById(clicked_id).className = "btn btn-outline-primary";
        }

        // id of all toggle items
        associated_id_list = ['SortBySize', 'SortByForkCount', 'SortByStarCount'];
        
        // removing id of item associated with clicked button
        associated_id_list.splice(associated_id_list.indexOf(toggle_id), 1)
        
        // looping though all items which are not associated with clicked button and making sure they are collapsed and their assocated button has specific color 
        for(index in associated_id_list){
          id = associated_id_list[index];
          document.getElementById(id).className = "collapse";
          document.getElementById(id+'_btn').className = "btn btn-outline-dark";
        }
      }
    </script>
  </head>
  <body  style="background-color:black;">
    {% if success == 'true' %}
    <div class="jumbotron" style="background-color:black;"> 
      <div class="container">
          <div class='row'>
            <div class='col-sm-12 text-center mt-10' style="color:white">
              <div>
                <p>
                    <img src="{{personal_detail.0}}" style="border-radius: 50%; border: 5px solid dodgerblue; width:150px;" />
                </p>
              </div>
                <p><a href="{{personal_detail.6}}" target="_blank" style="color:white">{{personal_detail.1 }}</a></p>
                <p>{{personal_detail.2}}</p>
                <br />
                <div width="100%" style="text-align: center;">
                  <table width="100%">
                    <tr>
                      <td width="15%"></td>
                      <td width="20%">
                        <img src="{% static 'octaprofile/images/work.png' %}" style="width:75px;" />
                      </td>
                      <td width="20%">
                        <img src="{% static 'octaprofile/images/location.png' %}" style="width:75px;" />
                      </td>
                      <td width="20%">
                        <img src="{% static 'octaprofile/images/website.png' %}" style="width:75px;" />
                      </td>
                      <td width="15%"></td>
                    </tr>
                  <tr>
                    <td></td>
                    <td>
                      {{personal_detail.3}}
                    </td>
                    <td>
                      {{personal_detail.4}}
                    </td>
                    <td>
                      {% if personal_detail.5 == '' %}
                        <a href="{{personal_detail.6}}" target="_blank" style="color:white">Github Profile</a>
                      {% else %}
                        <a href="{{personal_detail.5}}" target="_blank" style="color:white">{{personal_detail.5}}</a>
                      {% endif %}
                    </td>
                    <td></td>
                  </tr>
                </table>
            </div>
          </div>
      </div>
      </div>
      <div style="height:100px">
        <p></p>
      </div>

      <div class="container">
        <div class='row mx-2 my-2 align-middle'>
          <h4 style="color:#fff">Repository Details</h4>&emsp; &emsp; 
          <button id="SortBySize_btn" class="btn btn-outline-primary" type="button" data-toggle="collapse" data-target="#SortBySize" aria-expanded="true" 
                aria-controls="SortBySize" style="color:white" onclick="repository_filter(this)">Sort By Size</button>
                &emsp; &emsp; 
          <button id="SortByForkCount_btn" class="btn btn-outline-dark" type="button" data-toggle="collapse" data-target="#SortByForkCount" 
                aria-expanded="false" aria-controls="SortByForkCount" style="color:white" onclick="repository_filter(this)">Sort By Forks Count</button>
          &emsp; &emsp; 
          <button id="SortByStarCount_btn" class="btn btn-outline-dark" type="button" data-toggle="collapse" data-target="#SortByStarCount" 
                    aria-expanded="false" aria-controls="SortByStarCount" style="color:white" onclick="repository_filter(this)">Sort By Stars Count</button>
          &emsp; &emsp; 
        </div>
      </div>

      <div class="container">
        <div class='row mx-2 my-2 align-middle'>
          <br />
        </div>
      </div>

      <!-- SORT BY SIZE -->
      <div class="collapse show" id="SortBySize">
        <div class="container">
          <div class='row'>
            
            {% for item in size_list %}
              <div class='col-sm-4 text-center mt-10' style="color:white">
                <div style="border-radius: 10px ; border: 2px solid dodgerblue; background-color:#ccc; color:black">
                  <div class="mx-2 my-2" >
                    <table style="font-size: 13px; height: 125px">
                      <tr>
                        <td style="width:10%; text-align:center">
                          <img src="{% static 'octaprofile/images/repository.png' %}" width="18px" />
                        </td>
                        <td style="text-align:left" colspan=7>
                            <strong style="color:#0265D6">{{item.0}}</strong>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td colspan=7 style="text-align:left; vertical-align:top">
                          <div class="my-3">
                            {{item.1}}
                          </div>
                        </td>
                      </tr>
                      <tr style="vertical-align:middle">
                        <td style="width:5%; text-align:center; vertical-align:middle">
                          <img src="{% static 'octaprofile/images/round.png' %}" width="18px" />
                        </td>
                        <td style="width:25%; text-align:left; vertical-align:middle">
                          {{item.2}}
                        </td>
                        <td style="width:5%; text-align:center; vertical-align:middle">
                          <img src="{% static 'octaprofile/images/star.png' %}" width="18px" />
                        </td>
                        <td style="width:10%; text-align:left; vertical-align:middle">
                          {{item.3}}
                        </td>
                        <td style="width:5%; text-align:center; vertical-align:middle">
                          <img src="{% static 'octaprofile/images/fork.png' %}" width="18px" />
                        </td>
                        <td style="width:10%; text-align:left; vertical-align:middle">
                          {{item.4}}
                        </td>
                        <td style="width:10%; text-align:right; vertical-align:middle">
                          Size: 
                        </td>
                        <td style="width:30%; text-align:left; vertical-align:middle">
                          {{item.7}}
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
              {% if forloop.counter|divisibleby:3 %}
                </div>
                <div class='row mt-4'>
              {% endif %}  
            {% endfor %}
          </div>
        </div>
      </div>
      
      <!-- SORT BY FORK CONT -->
      <div class="collapse" id="SortByForkCount">
        <div class="container">
          <div class='row'>
            
            {% for item in fork_list %}
              <div class='col-sm-4 text-center mt-10' style="color:white">
                <div style="border-radius: 10px ; border: 2px solid dodgerblue; background-color:#ccc; color:black">
                  <div class="mx-2 my-2" >
                    <table style="font-size: 13px; height: 125px">
                      <tr>
                        <td style="width:10%; text-align:center">
                          <img src="{% static 'octaprofile/images/repository.png' %}" width="18px" />
                        </td>
                        <td style="text-align:left" colspan=7>
                            <strong style="color:#0265D6">{{item.0}}</strong>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td colspan=7 style="text-align:left; vertical-align:top">
                          <div class="my-3">
                            {{item.1}}
                          </div>
                        </td>
                      </tr>
                      <tr style="vertical-align:middle">
                        <td style="width:5%; text-align:center; vertical-align:middle">
                          <img src="{% static 'octaprofile/images/round.png' %}" width="18px" />
                        </td>
                        <td style="width:25%; text-align:left; vertical-align:middle">
                          {{item.2}}
                        </td>
                        <td style="width:5%; text-align:center; vertical-align:middle">
                          <img src="{% static 'octaprofile/images/star.png' %}" width="18px" />
                        </td>
                        <td style="width:10%; text-align:left; vertical-align:middle">
                          {{item.3}}
                        </td>
                        <td style="width:5%; text-align:center; vertical-align:middle">
                          <img src="{% static 'octaprofile/images/fork.png' %}" width="18px" />
                        </td>
                        <td style="width:10%; text-align:left; vertical-align:middle">
                          {{item.4}}
                        </td>
                        <td style="width:10%; text-align:right; vertical-align:middle">
                          Size: 
                        </td>
                        <td style="width:30%; text-align:left; vertical-align:middle">
                          {{item.7}}
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
              {% if forloop.counter|divisibleby:3 %}
                </div>
                <div class='row mt-4'>
              {% endif %}  
            {% endfor %}
          </div>
        </div>
      </div>
      
      <!-- SORT BY STAR CONT -->
      <div class="collapse" id="SortByStarCount">
        <div class="container">
          <div class='row'>
            
            {% for item in fork_list %}
              <div class='col-sm-4 text-center mt-10' style="color:white">
                <div style="border-radius: 10px ; border: 2px solid dodgerblue; background-color:#ccc; color:black">
                  <div class="mx-2 my-2" >
                    <table style="font-size: 13px; height: 125px">
                      <tr>
                        <td style="width:10%; text-align:center">
                          <img src="{% static 'octaprofile/images/repository.png' %}" width="18px" />
                        </td>
                        <td style="text-align:left" colspan=7>
                            <strong style="color:#0265D6">{{item.0}}</strong>
                        </td>
                      </tr>
                      <tr>
                        <td></td>
                        <td colspan=7 style="text-align:left; vertical-align:top">
                          <div class="my-3">
                            {{item.1}}
                          </div>
                        </td>
                      </tr>
                      <tr style="vertical-align:middle">
                        <td style="width:5%; text-align:center; vertical-align:middle">
                          <img src="{% static 'octaprofile/images/round.png' %}" width="18px" />
                        </td>
                        <td style="width:25%; text-align:left; vertical-align:middle">
                          {{item.2}}
                        </td>
                        <td style="width:5%; text-align:center; vertical-align:middle">
                          <img src="{% static 'octaprofile/images/star.png' %}" width="18px" />
                        </td>
                        <td style="width:10%; text-align:left; vertical-align:middle">
                          {{item.3}}
                        </td>
                        <td style="width:5%; text-align:center; vertical-align:middle">
                          <img src="{% static 'octaprofile/images/fork.png' %}" width="18px" />
                        </td>
                        <td style="width:10%; text-align:left; vertical-align:middle">
                          {{item.4}}
                        </td>
                        <td style="width:10%; text-align:right; vertical-align:middle">
                          Size: 
                        </td>
                        <td style="width:30%; text-align:left; vertical-align:middle">
                          {{item.7}}
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
              {% if forloop.counter|divisibleby:3 %}
              </div>
              <div class='row mt-4'>
              {% endif %}  
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    {% else %}
    <div class="jumbotron vertical-center" style="background-color:black;">

      <div class="container">
          <div class='row'>
              <div class='col-sm-12 text-center align-middle'>
                <img src="{% static 'octaprofile/images/github_logo.png' %}" width="20%">
                <br /><br /><br />
                <table style="width: 100%;">
                  <tr>
                    <td style="text-align: center;">
                      <form action="">
                          <input type="text" name="gh_username" placeholder="Github Username" 
                              style="border:0.75px solid dodgerblue; border-radius: 7.5px; background-color: #000; max-width:200px; padding: 5px; min-width:150px; color:white; font-size:15px" />
                          &emsp;
                          <button type="submit" class="btn btn-outline-primary btn-sm">
                            &emsp; <span style="color: white;">Fetch Profile</span> &emsp;
                          </button>
                      </form>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      {% if error != null %}
                        <br />
                        <span style="color:indianred">
                          {{error}}
                        </span>
                      {% endif %}
                    </td>
                  </tr>
                </table>
                
                <br /><br /><br />
              </div>
          </div>
      </div>
    </div>
    {% endif %}
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </body>
</html>